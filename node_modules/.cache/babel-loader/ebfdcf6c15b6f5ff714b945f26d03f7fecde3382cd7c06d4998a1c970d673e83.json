{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed } from \"vue\";\nimport PlojectSearchBar from \"../components/PlojectSearchBar.vue\";\nimport PostItem from \"../components/PostItem.vue\";\nimport PostFunctionModalDialog from \"../components/PostFunctionModalDialog.vue\";\nimport postData from \"../postData\";\nimport plusIcon from \"../assets/plus.svg\";\nexport default {\n  __name: 'HomeView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const postList = ref(JSON.parse(localStorage.getItem(\"postList\")) || postData); // 初期投稿データを管理\n    const showModal = ref(false); // モーダルの表示状態を管理\n    const searchResults = ref([]); // 検索結果を管理\n\n    // 検索結果を更新する関数\n    function updateSearchResults(results) {\n      searchResults.value = results || [];\n    }\n\n    // 検索クエリに基づいてフィルタリングされた投稿データを計算\n    const filteredPostList = computed(() => {\n      if (searchResults.value && searchResults.value.length > 0) {\n        return searchResults.value;\n      }\n      return postList.value || [];\n    });\n\n    // モーダルの表示/非表示を切り替える関数\n    function toggleModal() {\n      showModal.value = !showModal.value;\n    }\n\n    // 新しい投稿データを追加する関数\n    function addPost(newPost) {\n      // 新しい投稿データにユニークなIDを付与\n      const newPostId = postList.value.length > 0 ? Math.max(...postList.value.map(post => post.postId)) + 1 : 1;\n      const formattedPost = {\n        ...newPost,\n        postId: newPostId,\n        // ユニークなIDを設定\n        likeCount: 0,\n        // 初期の「いいね」数\n        isLiked: false,\n        // 初期の「いいね」状態\n        formattedDate: new Date().toLocaleDateString(\"ja-JP\", {\n          year: \"numeric\",\n          month: \"long\",\n          day: \"numeric\"\n        })\n      };\n\n      // postListをリアクティブに更新\n      postList.value.unshift(formattedPost);\n\n      // 検索結果が表示されている場合も即時反映\n      searchResults.value = [];\n\n      // 追加: 投稿リストをlocalStorageに保存\n      localStorage.setItem(\"postList\", JSON.stringify(postList.value));\n      console.log(\"新しい投稿データが追加されました:\", formattedPost);\n    }\n    const __returned__ = {\n      postList,\n      showModal,\n      searchResults,\n      updateSearchResults,\n      filteredPostList,\n      toggleModal,\n      addPost,\n      ref,\n      computed,\n      PlojectSearchBar,\n      PostItem,\n      PostFunctionModalDialog,\n      get postData() {\n        return postData;\n      },\n      get plusIcon() {\n        return plusIcon;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","PlojectSearchBar","PostItem","PostFunctionModalDialog","postData","plusIcon","postList","JSON","parse","localStorage","getItem","showModal","searchResults","updateSearchResults","results","value","filteredPostList","length","toggleModal","addPost","newPost","newPostId","Math","max","map","post","postId","formattedPost","likeCount","isLiked","formattedDate","Date","toLocaleDateString","year","month","day","unshift","setItem","stringify","console","log"],"sources":["/Users/namako-mac/mysite/game-introduction/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <!-- 検索バーコンポーネント -->\n    <PlojectSearchBar\n      :mode=\"'post'\"\n      :postList=\"postList\"\n      @searchResults=\"updateSearchResults\"\n    />\n    <!-- フィルタリングされたリストを PostItem に渡す -->\n    <div v-if=\"filteredPostList.length > 0\">\n      <PostItem :posts=\"filteredPostList\" />\n    </div>\n    <!-- 検索クエリがあり、かつ検索結果が0件のときだけ表示 -->\n    <p\n      v-else-if=\"\n        searchResults.length === 0 && searchQuery && searchQuery.length > 0\n      \"\n    >\n      一致する投稿がありません。\n    </p>\n    <!-- 投稿機能 -->\n    <img\n      :src=\"plusIcon\"\n      alt=\"投稿ボタン\"\n      class=\"plus-icon\"\n      @click=\"toggleModal\"\n    />\n    <PostFunctionModalDialog\n      v-if=\"showModal\"\n      :openModal=\"showModal\"\n      @close=\"toggleModal\"\n      @submitPost=\"addPost\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport PlojectSearchBar from \"../components/PlojectSearchBar.vue\";\nimport PostItem from \"../components/PostItem.vue\";\nimport PostFunctionModalDialog from \"../components/PostFunctionModalDialog.vue\";\nimport postData from \"../postData\";\nimport plusIcon from \"../assets/plus.svg\";\n\nconst postList = ref(\n  JSON.parse(localStorage.getItem(\"postList\")) || postData\n); // 初期投稿データを管理\nconst showModal = ref(false); // モーダルの表示状態を管理\nconst searchResults = ref([]); // 検索結果を管理\n\n// 検索結果を更新する関数\nfunction updateSearchResults(results) {\n  searchResults.value = results || [];\n}\n\n// 検索クエリに基づいてフィルタリングされた投稿データを計算\nconst filteredPostList = computed(() => {\n  if (searchResults.value && searchResults.value.length > 0) {\n    return searchResults.value;\n  }\n  return postList.value || [];\n});\n\n// モーダルの表示/非表示を切り替える関数\nfunction toggleModal() {\n  showModal.value = !showModal.value;\n}\n\n// 新しい投稿データを追加する関数\nfunction addPost(newPost) {\n  // 新しい投稿データにユニークなIDを付与\n  const newPostId =\n    postList.value.length > 0\n      ? Math.max(...postList.value.map((post) => post.postId)) + 1\n      : 1;\n\n  const formattedPost = {\n    ...newPost,\n    postId: newPostId, // ユニークなIDを設定\n    likeCount: 0, // 初期の「いいね」数\n    isLiked: false, // 初期の「いいね」状態\n    formattedDate: new Date().toLocaleDateString(\"ja-JP\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    }),\n  };\n\n  // postListをリアクティブに更新\n  postList.value.unshift(formattedPost);\n\n  // 検索結果が表示されている場合も即時反映\n  searchResults.value = [];\n\n  // 追加: 投稿リストをlocalStorageに保存\n  localStorage.setItem(\"postList\", JSON.stringify(postList.value));\n\n  console.log(\"新しい投稿データが追加されました:\", formattedPost);\n}\n</script>\n\n<style scoped>\n.home {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 50px;\n  padding: 20px;\n}\n\n.plus-icon {\n  width: 130px;\n  height: 130px;\n  cursor: pointer;\n  position: fixed;\n  bottom: 100px;\n  right: 100px;\n  border-radius: 50%;\n  background-color: #3776a7; /* アイコンの背景色 */\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n  transition: transform 0.2s ease;\n}\n\n.plus-icon:hover {\n  transform: scale(1.2); /* ホバー時に拡大 */\n}\n</style>\n"],"mappings":";;AAqCA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,OAAOC,gBAAgB,MAAM,oCAAoC;AACjE,OAAOC,QAAQ,MAAM,4BAA4B;AACjD,OAAOC,uBAAuB,MAAM,2CAA2C;AAC/E,OAAOC,QAAQ,MAAM,aAAa;AAClC,OAAOC,QAAQ,MAAM,oBAAoB;;;;;;;IAEzC,MAAMC,QAAQ,GAAGP,GAAG,CAClBQ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,IAAIN,QAClD,CAAC,CAAC,CAAC;IACH,MAAMO,SAAS,GAAGZ,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;IAC9B,MAAMa,aAAa,GAAGb,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;;IAE/B;IACA,SAASc,mBAAmBA,CAACC,OAAO,EAAE;MACpCF,aAAa,CAACG,KAAK,GAAGD,OAAO,IAAI,EAAE;IACrC;;IAEA;IACA,MAAME,gBAAgB,GAAGhB,QAAQ,CAAC,MAAM;MACtC,IAAIY,aAAa,CAACG,KAAK,IAAIH,aAAa,CAACG,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;QACzD,OAAOL,aAAa,CAACG,KAAK;MAC5B;MACA,OAAOT,QAAQ,CAACS,KAAK,IAAI,EAAE;IAC7B,CAAC,CAAC;;IAEF;IACA,SAASG,WAAWA,CAAA,EAAG;MACrBP,SAAS,CAACI,KAAK,GAAG,CAACJ,SAAS,CAACI,KAAK;IACpC;;IAEA;IACA,SAASI,OAAOA,CAACC,OAAO,EAAE;MACxB;MACA,MAAMC,SAAS,GACbf,QAAQ,CAACS,KAAK,CAACE,MAAM,GAAG,IACpBK,IAAI,CAACC,GAAG,CAAC,GAAGjB,QAAQ,CAACS,KAAK,CAACS,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,IACzD,CAAC;MAEP,MAAMC,aAAa,GAAG;QACpB,GAAGP,OAAO;QACVM,MAAM,EAAEL,SAAS;QAAE;QACnBO,SAAS,EAAE,CAAC;QAAE;QACdC,OAAO,EAAE,KAAK;QAAE;QAChBC,aAAa,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,OAAO,EAAE;UACpDC,IAAI,EAAE,SAAS;UACfC,KAAK,EAAE,MAAM;UACbC,GAAG,EAAE;QACP,CAAC;MACH,CAAC;;MAED;MACA7B,QAAQ,CAACS,KAAK,CAACqB,OAAO,CAACT,aAAa,CAAC;;MAErC;MACAf,aAAa,CAACG,KAAK,GAAG,EAAE;;MAExB;MACAN,YAAY,CAAC4B,OAAO,CAAC,UAAU,EAAE9B,IAAI,CAAC+B,SAAS,CAAChC,QAAQ,CAACS,KAAK,CAAC,CAAC;MAEhEwB,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEb,aAAa,CAAC;IACjD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}