{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nconst express = require(\"express\");\nconst axios = require(\"axios\");\nconst cors = require(\"cors\");\nconst app = express();\nconst PORT = 5000;\napp.use(cors());\napp.get(\"/api/steam/appdetails\", async (req, res) => {\n  const {\n    appids\n  } = req.query;\n  const url = `https://store.steampowered.com/api/appdetails?appids=${appids}&cc=jp&l=japanese`;\n  try {\n    const response = await axios.get(url);\n    res.json(response.data);\n  } catch (error) {\n    console.error(\"Steam APIへのリクエスト中にエラーが発生しました:\", error);\n    res.status(500).send(\"エラーが発生しました\");\n  }\n});\napp.listen(PORT, () => {\n  console.log(`プロキシサーバーがポート ${PORT} で起動しました`);\n});\nconst API_KEY = \"70EEBD1F7268C22952B9C6F9080E8B5D\"; // Steam Web APIキー\nconst BASE_URL = \"/api/steam\"; // プロキシ経由のURL\n\n/**\n * Steam Web APIからすべてのアプリ一覧を取得します。\n * @returns {Promise<Array>} アプリ一覧（IDと名前）\n */\nexport async function getAppList() {\n  const url = `${BASE_URL}/ISteamApps/GetAppList/v2/?key=${API_KEY}`; // APIキーを追加\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTPエラー: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.applist.apps; // アプリ一覧を返す\n  } catch (error) {\n    console.error(\"アプリ一覧の取得中にエラーが発生しました:\", error);\n    throw error;\n  }\n}\n\n/**\n * アプリ名で検索をかけ、候補を出力します。\n * @param {string} query 検索クエリ（アプリ名）\n * @returns {Promise<Array>} 検索結果（候補のアプリ一覧）\n */\nexport async function searchAppByName(query) {\n  try {\n    const appList = await getAppList(); // アプリ一覧を取得\n    const filteredApps = appList.filter(app => app.name.toLowerCase().includes(query.toLowerCase())); // 名前でフィルタリング\n    return filteredApps; // 検索結果を返す\n  } catch (error) {\n    console.error(\"アプリ名検索中にエラーが発生しました:\", error);\n    throw error;\n  }\n}\n\n/**\n * 特定のアプリの詳細情報を取得します。\n * @param {number} appid アプリID\n * @returns {Promise<Object>} アプリの詳細情報\n */\nexport async function getAppDetails(appid) {\n  const url = `https://store.steampowered.com/api/appdetails?appids=${appid}&cc=jp&l=japanese`;\n  try {\n    const response = await fetch(url, {\n      mode: \"no-cors\"\n    });\n    const data = await response.json();\n    const game = data[appid].data;\n\n    // 必要なデータを整形して返す\n    return {\n      appid: game.steam_appid,\n      name: game.name,\n      header_image: game.header_image,\n      capsule_image: `https://cdn.akamai.steamstatic.com/steam/apps/${appid}/capsule_231x87.jpg`,\n      genres: game.genres.map(g => g.description),\n      short_description: game.short_description,\n      steamAppURL: `https://store.steampowered.com/app/${appid}/`\n    };\n  } catch (error) {\n    console.error(`アプリID ${appid} の詳細情報取得中にエラーが発生しました:`, error);\n    throw error;\n  }\n}\n\n/**\n * 複数のアプリの詳細情報を取得し、postData形式に変換します。\n * @param {Array<number>} appIds アプリIDの配列\n * @returns {Promise<Array>} postData形式のデータ\n */\nexport async function fetchPostData(appIds) {\n  try {\n    const postData = await Promise.all(appIds.map(async appid => {\n      const game = await getAppDetails(appid);\n      return {\n        appId: game.appid,\n        appName: game.name,\n        appImages: [game.header_image, game.capsule_image],\n        tags: game.genres,\n        // ジャンルをタグとして使用\n        oneWard: game.short_description,\n        // 短い説明を使用\n        steamAppURL: game.steamAppURL\n      };\n    }));\n    return postData;\n  } catch (error) {\n    console.error(\"postData形式への変換中にエラーが発生しました:\", error);\n    throw error;\n  }\n}","map":{"version":3,"names":["express","require","axios","cors","app","PORT","use","get","req","res","appids","query","url","response","json","data","error","console","status","send","listen","log","API_KEY","BASE_URL","getAppList","fetch","ok","Error","applist","apps","searchAppByName","appList","filteredApps","filter","name","toLowerCase","includes","getAppDetails","appid","mode","game","steam_appid","header_image","capsule_image","genres","map","g","description","short_description","steamAppURL","fetchPostData","appIds","postData","Promise","all","appId","appName","appImages","tags","oneWard"],"sources":["/Users/namako-mac/mysite/game-introduction/src/SteamWebAPI/SteamWebAPI.js"],"sourcesContent":["const express = require(\"express\");\nconst axios = require(\"axios\");\nconst cors = require(\"cors\");\n\nconst app = express();\nconst PORT = 5000;\n\napp.use(cors());\n\napp.get(\"/api/steam/appdetails\", async (req, res) => {\n  const { appids } = req.query;\n  const url = `https://store.steampowered.com/api/appdetails?appids=${appids}&cc=jp&l=japanese`;\n\n  try {\n    const response = await axios.get(url);\n    res.json(response.data);\n  } catch (error) {\n    console.error(\"Steam APIへのリクエスト中にエラーが発生しました:\", error);\n    res.status(500).send(\"エラーが発生しました\");\n  }\n});\n\napp.listen(PORT, () => {\n  console.log(`プロキシサーバーがポート ${PORT} で起動しました`);\n});\n\nconst API_KEY = \"70EEBD1F7268C22952B9C6F9080E8B5D\"; // Steam Web APIキー\nconst BASE_URL = \"/api/steam\"; // プロキシ経由のURL\n\n/**\n * Steam Web APIからすべてのアプリ一覧を取得します。\n * @returns {Promise<Array>} アプリ一覧（IDと名前）\n */\nexport async function getAppList() {\n  const url = `${BASE_URL}/ISteamApps/GetAppList/v2/?key=${API_KEY}`; // APIキーを追加\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTPエラー: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.applist.apps; // アプリ一覧を返す\n  } catch (error) {\n    console.error(\"アプリ一覧の取得中にエラーが発生しました:\", error);\n    throw error;\n  }\n}\n\n/**\n * アプリ名で検索をかけ、候補を出力します。\n * @param {string} query 検索クエリ（アプリ名）\n * @returns {Promise<Array>} 検索結果（候補のアプリ一覧）\n */\nexport async function searchAppByName(query) {\n  try {\n    const appList = await getAppList(); // アプリ一覧を取得\n    const filteredApps = appList.filter((app) =>\n      app.name.toLowerCase().includes(query.toLowerCase())\n    ); // 名前でフィルタリング\n    return filteredApps; // 検索結果を返す\n  } catch (error) {\n    console.error(\"アプリ名検索中にエラーが発生しました:\", error);\n    throw error;\n  }\n}\n\n/**\n * 特定のアプリの詳細情報を取得します。\n * @param {number} appid アプリID\n * @returns {Promise<Object>} アプリの詳細情報\n */\nexport async function getAppDetails(appid) {\n  const url = `https://store.steampowered.com/api/appdetails?appids=${appid}&cc=jp&l=japanese`;\n\n  try {\n    const response = await fetch(url, { mode: \"no-cors\" });\n    const data = await response.json();\n    const game = data[appid].data;\n\n    // 必要なデータを整形して返す\n    return {\n      appid: game.steam_appid,\n      name: game.name,\n      header_image: game.header_image,\n      capsule_image: `https://cdn.akamai.steamstatic.com/steam/apps/${appid}/capsule_231x87.jpg`,\n      genres: game.genres.map((g) => g.description),\n      short_description: game.short_description,\n      steamAppURL: `https://store.steampowered.com/app/${appid}/`,\n    };\n  } catch (error) {\n    console.error(\n      `アプリID ${appid} の詳細情報取得中にエラーが発生しました:`,\n      error\n    );\n    throw error;\n  }\n}\n\n/**\n * 複数のアプリの詳細情報を取得し、postData形式に変換します。\n * @param {Array<number>} appIds アプリIDの配列\n * @returns {Promise<Array>} postData形式のデータ\n */\nexport async function fetchPostData(appIds) {\n  try {\n    const postData = await Promise.all(\n      appIds.map(async (appid) => {\n        const game = await getAppDetails(appid);\n\n        return {\n          appId: game.appid,\n          appName: game.name,\n          appImages: [game.header_image, game.capsule_image],\n          tags: game.genres, // ジャンルをタグとして使用\n          oneWard: game.short_description, // 短い説明を使用\n          steamAppURL: game.steamAppURL,\n        };\n      })\n    );\n\n    return postData;\n  } catch (error) {\n    console.error(\"postData形式への変換中にエラーが発生しました:\", error);\n    throw error;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}