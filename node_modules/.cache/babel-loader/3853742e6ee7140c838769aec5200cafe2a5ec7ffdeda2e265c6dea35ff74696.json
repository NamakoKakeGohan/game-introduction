{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"diagnosis-page\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" モーダル \"), _createVNode($setup[\"PlojectTestStart\"], {\n    isVisible: $setup.showModal,\n    onStart: $setup.startTest\n  }, null, 8 /* PROPS */, [\"isVisible\"]), _createCommentVNode(\" 質問カード \"), !$setup.showModal && $setup.currentQuestion ? (_openBlock(), _createBlock($setup[\"QuestionCard\"], {\n    key: 0,\n    question: $setup.currentQuestion,\n    questionNumber: $setup.currentIndex + 1,\n    onSelect: $setup.handleSelect\n  }, null, 8 /* PROPS */, [\"question\", \"questionNumber\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createVNode","$setup","isVisible","showModal","onStart","startTest","currentQuestion","_createBlock","key","question","questionNumber","currentIndex","onSelect","handleSelect"],"sources":["/Users/namako-mac/mysite/game-introduction/src/views/TestView.vue"],"sourcesContent":["<template>\n  <div class=\"diagnosis-page\">\n    <!-- モーダル -->\n    <PlojectTestStart :isVisible=\"showModal\" @start=\"startTest\"/>\n\n    <!-- 質問カード -->\n    <QuestionCard\n      v-if=\"!showModal && currentQuestion\"\n      :question=\"currentQuestion\"\n      :questionNumber=\"currentIndex + 1\"\n      @select=\"handleSelect\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport { useRouter }     from \"vue-router\";\nimport QuestionCard      from \"../components/QuestionCard.vue\";\nimport PlojectTestStart  from \"../components/PlojectTestStart.vue\";\nimport questionData      from \"../data/questionData.js\";\n\n// スコア状態\nconst scores = ref({\n  アクション: 0,\n  カードゲーム: 0,\n  格闘: 0,\n  RPG: 0,\n  シューテーング: 0,\n  アドベンチャー: 0,\n  レース: 0,\n  シュミレーション: 0,\n});\n\nconst currentIndex = ref(0); // 現在の質問\nconst showModal    = ref(true); // モーダルの表示状態\nconst router       = useRouter();\n\n// 現在の質問\nconst currentQuestion = computed(() => questionData[currentIndex.value]);\n\n// モーダルのスタートボタンが押されたとき\nconst startTest = () => {\n  showModal.value = false; // モーダルを非表示にする\n};\n\n// イベントハンドリングされたジャンルをスコアに加算し、次の質問へ進む\nfunction handleSelect(selectedGenres) {\n  selectedGenres.forEach((genre) => {\n    if (scores.value[genre] !== undefined) { // ジャンルが存在するか確認\n      scores.value[genre]++;\n    }\n  });\n\n  if (currentIndex.value < questionData.length - 1) {\n    currentIndex.value++;\n  } else {\n    // 最後の質問の場合、結果ページに遷移\n    const topGenre = Object.entries(scores.value).sort((a, b) => b[1] - a[1])[0][0];\n    router.push({ name: \"TestResult\", query: { genre: topGenre } });\n  }\n}\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgB;;uBAA3BC,mBAAA,CAWM,OAXNC,UAWM,GAVJC,mBAAA,UAAa,EACbC,YAAA,CAA6DC,MAAA;IAA1CC,SAAS,EAAED,MAAA,CAAAE,SAAS;IAAGC,OAAK,EAAEH,MAAA,CAAAI;0CAEjDN,mBAAA,WAAc,E,CAELE,MAAA,CAAAE,SAAS,IAAIF,MAAA,CAAAK,eAAe,I,cADrCC,YAAA,CAKEN,MAAA;IAXNO,GAAA;IAQOC,QAAQ,EAAER,MAAA,CAAAK,eAAe;IACzBI,cAAc,EAAET,MAAA,CAAAU,YAAY;IAC5BC,QAAM,EAAEX,MAAA,CAAAY;6DAVfd,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}