{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\n/**\n * 特定のアプリの詳細情報を取得します。\n * @param {number} appid アプリID\n * @returns {Promise<Object>} アプリの詳細情報\n */\nexport async function getAppDetails(appid) {\n  const url = `${BASE_URL}/?type=appdetails&appid=${appid}`;\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTPエラー: ${response.status}`);\n    }\n    const data = await response.json();\n\n    // レスポンスが空の場合の処理\n    if (!data || !data[appid] || !data[appid].data) {\n      throw new Error(`アプリID ${appid} のデータが存在しません`);\n    }\n    const game = data[appid].data;\n\n    // 必要なデータを整形して返す\n    return {\n      appid: game.steam_appid,\n      name: game.name,\n      header_image: game.header_image,\n      capsule_image: `https://cdn.akamai.steamstatic.com/steam/apps/${appid}/capsule_231x87.jpg`,\n      genres: game.genres ? game.genres.map(g => g.description) : [],\n      // genresがundefinedの場合は空配列を返す\n      short_description: game.short_description || \"説明がありません\",\n      steamAppURL: `https://store.steampowered.com/app/${appid}/`\n    };\n  } catch (error) {\n    console.error(`アプリID ${appid} の詳細情報取得中にエラーが発生しました:`, error);\n    throw error;\n  }\n}\n\n/**\n * アプリ名で検索をかけ、候補を出力します。\n * @param {string} query 検索クエリ（アプリ名）\n * @returns {Promise<Array>} 検索結果（候補のアプリ一覧）\n */\nexport async function searchAppByName(query) {\n  try {\n    const appList = await getAppListReversed(); // 逆順のアプリ一覧を取得\n    const filteredApps = appList.filter(app => app.name.toLowerCase().includes(query.toLowerCase())); // 名前でフィルタリング\n    return filteredApps; // 検索結果を返す\n  } catch (error) {\n    console.error(\"アプリ名検索中にエラーが発生しました:\", error);\n    throw error;\n  }\n}\n\n/**\n * 逆順のアプリ一覧から情報を取得し、postData形式に変換します。\n * @param {Array<number>} appIds アプリIDの配列\n * @returns {Promise<Array>} postData形式のデータ\n */\nexport async function fetchPostDataReversed(appIds) {\n  try {\n    const postData = await Promise.all(appIds.map(async appid => {\n      try {\n        const game = await getAppDetails(appid);\n        return {\n          appId: game.appid,\n          appName: game.name,\n          appImages: [game.header_image, game.capsule_image],\n          tags: game.genres,\n          // ジャンルをタグとして使用\n          oneWard: game.short_description,\n          // 短い説明を使用\n          steamAppURL: game.steamAppURL\n        };\n      } catch (error) {\n        console.error(`アプリID ${appid} のデータ取得中にエラーが発生しました:`, error);\n        return null; // エラー時はnullを返す\n      }\n    }));\n    return postData.filter(item => item !== null); // nullを除外して返す\n  } catch (error) {\n    console.error(\"postData形式への変換中にエラーが発生しました:\", error);\n    throw error;\n  }\n}","map":{"version":3,"names":["getAppDetails","appid","url","BASE_URL","response","fetch","ok","Error","status","data","json","game","steam_appid","name","header_image","capsule_image","genres","map","g","description","short_description","steamAppURL","error","console","searchAppByName","query","appList","getAppListReversed","filteredApps","filter","app","toLowerCase","includes","fetchPostDataReversed","appIds","postData","Promise","all","appId","appName","appImages","tags","oneWard","item"],"sources":["/Users/namako-mac/mysite/game-introduction/src/SteamWebAPI/SteamWebAPI.js"],"sourcesContent":["\n\n/**\n * 特定のアプリの詳細情報を取得します。\n * @param {number} appid アプリID\n * @returns {Promise<Object>} アプリの詳細情報\n */\nexport async function getAppDetails(appid) {\n  const url = `${BASE_URL}/?type=appdetails&appid=${appid}`;\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTPエラー: ${response.status}`);\n    }\n    const data = await response.json();\n\n    // レスポンスが空の場合の処理\n    if (!data || !data[appid] || !data[appid].data) {\n      throw new Error(`アプリID ${appid} のデータが存在しません`);\n    }\n\n    const game = data[appid].data;\n\n    // 必要なデータを整形して返す\n    return {\n      appid: game.steam_appid,\n      name: game.name,\n      header_image: game.header_image,\n      capsule_image: `https://cdn.akamai.steamstatic.com/steam/apps/${appid}/capsule_231x87.jpg`,\n      genres: game.genres ? game.genres.map((g) => g.description) : [], // genresがundefinedの場合は空配列を返す\n      short_description: game.short_description || \"説明がありません\",\n      steamAppURL: `https://store.steampowered.com/app/${appid}/`,\n    };\n  } catch (error) {\n    console.error(\n      `アプリID ${appid} の詳細情報取得中にエラーが発生しました:`,\n      error\n    );\n    throw error;\n  }\n}\n\n/**\n * アプリ名で検索をかけ、候補を出力します。\n * @param {string} query 検索クエリ（アプリ名）\n * @returns {Promise<Array>} 検索結果（候補のアプリ一覧）\n */\nexport async function searchAppByName(query) {\n  try {\n    const appList = await getAppListReversed(); // 逆順のアプリ一覧を取得\n    const filteredApps = appList.filter((app) =>\n      app.name.toLowerCase().includes(query.toLowerCase())\n    ); // 名前でフィルタリング\n    return filteredApps; // 検索結果を返す\n  } catch (error) {\n    console.error(\"アプリ名検索中にエラーが発生しました:\", error);\n    throw error;\n  }\n}\n\n/**\n * 逆順のアプリ一覧から情報を取得し、postData形式に変換します。\n * @param {Array<number>} appIds アプリIDの配列\n * @returns {Promise<Array>} postData形式のデータ\n */\nexport async function fetchPostDataReversed(appIds) {\n  try {\n    const postData = await Promise.all(\n      appIds.map(async (appid) => {\n        try {\n          const game = await getAppDetails(appid);\n\n          return {\n            appId: game.appid,\n            appName: game.name,\n            appImages: [game.header_image, game.capsule_image],\n            tags: game.genres, // ジャンルをタグとして使用\n            oneWard: game.short_description, // 短い説明を使用\n            steamAppURL: game.steamAppURL,\n          };\n        } catch (error) {\n          console.error(\n            `アプリID ${appid} のデータ取得中にエラーが発生しました:`,\n            error\n          );\n          return null; // エラー時はnullを返す\n        }\n      })\n    );\n\n    return postData.filter((item) => item !== null); // nullを除外して返す\n  } catch (error) {\n    console.error(\"postData形式への変換中にエラーが発生しました:\", error);\n    throw error;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}