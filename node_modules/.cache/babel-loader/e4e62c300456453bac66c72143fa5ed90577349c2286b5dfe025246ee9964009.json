{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport QuestionCard from \"../components/QuestionCard.vue\";\nimport questionData from \"../data/questionData.js\";\n\n// スコア状態\n\nexport default {\n  __name: 'TestView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const scores = ref({\n      アクション: 0,\n      カードゲーム: 0,\n      格闘: 0,\n      RPG: 0,\n      シューテーング: 0,\n      アドベンチャー: 0,\n      レース: 0,\n      シュミレーション: 0\n    });\n    const currentIndex = ref(0); // 現在の質問\n    const router = useRouter();\n\n    // 現在の質問\n    const currentQuestion = computed(() => questionData[currentIndex.value]);\n\n    // イベントハンドリングされたジャンルをスコアに加算し、次の質問へ進む\n    function handleSelect(selectedGenres) {\n      console.log(\"selectedGenres:\", selectedGenres); // デバッグログ\n\n      if (!Array.isArray(selectedGenres)) {\n        console.error(\"selectedGenres is not an array:\", selectedGenres);\n        return;\n      }\n      selectedGenres.forEach(genre => {\n        if (scores.value[genre] !== undefined) {\n          scores.value[genre]++;\n        }\n      });\n      if (currentIndex.value < questionData.length - 1) {\n        currentIndex.value++;\n      } else {\n        const topGenre = Object.entries(scores.value).sort((a, b) => b[1] - a[1])[0][0];\n        router.push({\n          name: \"TestResultVIew\",\n          query: {\n            genre: topGenre\n          }\n        });\n      }\n    }\n    ;\n    const __returned__ = {\n      scores,\n      currentIndex,\n      router,\n      currentQuestion,\n      handleSelect,\n      ref,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      QuestionCard,\n      get questionData() {\n        return questionData;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","useRouter","QuestionCard","questionData","scores","アクション","カードゲーム","格闘","RPG","シューテーング","アドベンチャー","レース","シュミレーション","currentIndex","router","currentQuestion","value","handleSelect","selectedGenres","console","log","Array","isArray","error","forEach","genre","undefined","length","topGenre","Object","entries","sort","a","b","push","name","query"],"sources":["/Users/namako-mac/mysite/game-introduction/src/views/TestView.vue"],"sourcesContent":["<template>\n  <div class=\"diagnosis-page\">\n    <QuestionCard\n      v-if=\"currentQuestion\"\n      :question=\"currentQuestion\"\n      :questionNumber=\"currentIndex + 1\"\n      @select=\"handleSelect\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport { useRouter }     from \"vue-router\";\nimport QuestionCard      from \"../components/QuestionCard.vue\";\nimport questionData      from \"../data/questionData.js\";\n\n// スコア状態\nconst scores = ref({\n  アクション: 0,\n  カードゲーム: 0,\n  格闘: 0,\n  RPG: 0,\n  シューテーング: 0,\n  アドベンチャー: 0,\n  レース: 0,\n  シュミレーション: 0,\n});\n\nconst currentIndex = ref(0); // 現在の質問\nconst router       = \nuseRouter();\n\n// 現在の質問\nconst currentQuestion = computed(() => questionData[currentIndex.value]);\n\n// イベントハンドリングされたジャンルをスコアに加算し、次の質問へ進む\nfunction handleSelect(selectedGenres) {\n  console.log(\"selectedGenres:\", selectedGenres); // デバッグログ\n\n  if (!Array.isArray(selectedGenres)) {\n    console.error(\"selectedGenres is not an array:\", selectedGenres);\n    return;\n  }\n\n  selectedGenres.forEach((genre) => {\n    if (scores.value[genre] !== undefined) {\n      scores.value[genre]++;\n    }\n  });\n\n  if (currentIndex.value < questionData.length - 1) {\n    currentIndex.value++;\n  } else {\n    const topGenre = Object.entries(scores.value).sort((a, b) => b[1] - a[1])[0][0];\n    router.push({ name: \"TestResultVIew\", query: { genre: topGenre } });\n  }\n};\n</script>\n"],"mappings":";;;AAYA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SAASC,SAAS,QAAY,YAAY;AAC1C,OAAOC,YAAY,MAAW,gCAAgC;AAC9D,OAAOC,YAAY,MAAW,yBAAyB;;AAEvD;;;;;;;;IACA,MAAMC,MAAM,GAAGL,GAAG,CAAC;MACjBM,KAAK,EAAE,CAAC;MACRC,MAAM,EAAE,CAAC;MACTC,EAAE,EAAE,CAAC;MACLC,GAAG,EAAE,CAAC;MACNC,OAAO,EAAE,CAAC;MACVC,OAAO,EAAE,CAAC;MACVC,GAAG,EAAE,CAAC;MACNC,QAAQ,EAAE;IACZ,CAAC,CAAC;IAEF,MAAMC,YAAY,GAAGd,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7B,MAAMe,MAAM,GACZb,SAAS,CAAC,CAAC;;IAEX;IACA,MAAMc,eAAe,GAAGf,QAAQ,CAAC,MAAMG,YAAY,CAACU,YAAY,CAACG,KAAK,CAAC,CAAC;;IAExE;IACA,SAASC,YAAYA,CAACC,cAAc,EAAE;MACpCC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEF,cAAc,CAAC,CAAC,CAAC;;MAEhD,IAAI,CAACG,KAAK,CAACC,OAAO,CAACJ,cAAc,CAAC,EAAE;QAClCC,OAAO,CAACI,KAAK,CAAC,iCAAiC,EAAEL,cAAc,CAAC;QAChE;MACF;MAEAA,cAAc,CAACM,OAAO,CAAEC,KAAK,IAAK;QAChC,IAAIrB,MAAM,CAACY,KAAK,CAACS,KAAK,CAAC,KAAKC,SAAS,EAAE;UACrCtB,MAAM,CAACY,KAAK,CAACS,KAAK,CAAC,EAAE;QACvB;MACF,CAAC,CAAC;MAEF,IAAIZ,YAAY,CAACG,KAAK,GAAGb,YAAY,CAACwB,MAAM,GAAG,CAAC,EAAE;QAChDd,YAAY,CAACG,KAAK,EAAE;MACtB,CAAC,MAAM;QACL,MAAMY,QAAQ,GAAGC,MAAM,CAACC,OAAO,CAAC1B,MAAM,CAACY,KAAK,CAAC,CAACe,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/ElB,MAAM,CAACoB,IAAI,CAAC;UAAEC,IAAI,EAAE,gBAAgB;UAAEC,KAAK,EAAE;YAAEX,KAAK,EAAEG;UAAS;QAAE,CAAC,CAAC;MACrE;IACF;IAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}