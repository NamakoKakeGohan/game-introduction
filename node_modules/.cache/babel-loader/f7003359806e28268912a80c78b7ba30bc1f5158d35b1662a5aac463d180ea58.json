{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref } from \"vue\";\nimport { searchAppByName, fetchPostDataReversed } from \"./SteamWebAPI\";\n\n/**\n * アプリ検索用のカスタムフック\n */\nexport function useSearchApps(emit) {\n  const searchQuery = ref(\"\");\n  const searchResults = ref([]);\n  const handleSearch = async () => {\n    if (!searchQuery.value) {\n      searchResults.value = [];\n      emit(\"searchResults\", []);\n      return;\n    }\n    try {\n      const results = await searchAppByName(searchQuery.value);\n      const filteredResults = results.filter(app => app.name.toLowerCase().startsWith(searchQuery.value.toLowerCase()));\n      const topResults = filteredResults.slice(0, 10);\n      const appIds = topResults.map(app => app.appid);\n      const appData = await fetchAppDataReversed(appIds);\n      searchResults.value = postData || [];\n      emit(\"searchResults\", searchResults.value);\n    } catch (error) {\n      console.error(\"検索エラー:\", error);\n      searchResults.value = [];\n      emit(\"searchResults\", []);\n    }\n  };\n  const selectResult = result => {\n    searchQuery.value = result.appName;\n    emit(\"selectResult\", result);\n    searchResults.value = [];\n  };\n  return {\n    searchQuery,\n    searchResults,\n    handleSearch,\n    selectResult\n  };\n}","map":{"version":3,"names":["ref","searchAppByName","fetchPostDataReversed","useSearchApps","emit","searchQuery","searchResults","handleSearch","value","results","filteredResults","filter","app","name","toLowerCase","startsWith","topResults","slice","appIds","map","appid","appData","fetchAppDataReversed","postData","error","console","selectResult","result","appName"],"sources":["/Users/namako-mac/mysite/game-introduction/src/SteamWebAPI/SearchApps.js"],"sourcesContent":["import { ref } from \"vue\";\nimport { searchAppByName, fetchPostDataReversed } from \"./SteamWebAPI\";\n\n/**\n * アプリ検索用のカスタムフック\n */\nexport function useSearchApps(emit) {\n  const searchQuery = ref(\"\");\n  const searchResults = ref([]);\n\n  const handleSearch = async () => {\n    if (!searchQuery.value) {\n      searchResults.value = [];\n      emit(\"searchResults\", []);\n      return;\n    }\n\n    try {\n      const results = await searchAppByName(searchQuery.value);\n      const filteredResults = results.filter((app) =>\n        app.name.toLowerCase().startsWith(searchQuery.value.toLowerCase())\n      );\n      const topResults = filteredResults.slice(0, 10);\n\n      const appIds = topResults.map((app) => app.appid);\n      const appData = await fetchAppDataReversed(appIds);\n      searchResults.value = postData || [];\n      emit(\"searchResults\", searchResults.value);\n    } catch (error) {\n      console.error(\"検索エラー:\", error);\n      searchResults.value = [];\n      emit(\"searchResults\", []);\n    }\n  };\n\n  const selectResult = (result) => {\n    searchQuery.value = result.appName;\n    emit(\"selectResult\", result);\n    searchResults.value = [];\n  };\n\n  return {\n    searchQuery,\n    searchResults,\n    handleSearch,\n    selectResult,\n  };\n}\n"],"mappings":";;;AAAA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,eAAe,EAAEC,qBAAqB,QAAQ,eAAe;;AAEtE;AACA;AACA;AACA,OAAO,SAASC,aAAaA,CAACC,IAAI,EAAE;EAClC,MAAMC,WAAW,GAAGL,GAAG,CAAC,EAAE,CAAC;EAC3B,MAAMM,aAAa,GAAGN,GAAG,CAAC,EAAE,CAAC;EAE7B,MAAMO,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACF,WAAW,CAACG,KAAK,EAAE;MACtBF,aAAa,CAACE,KAAK,GAAG,EAAE;MACxBJ,IAAI,CAAC,eAAe,EAAE,EAAE,CAAC;MACzB;IACF;IAEA,IAAI;MACF,MAAMK,OAAO,GAAG,MAAMR,eAAe,CAACI,WAAW,CAACG,KAAK,CAAC;MACxD,MAAME,eAAe,GAAGD,OAAO,CAACE,MAAM,CAAEC,GAAG,IACzCA,GAAG,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,UAAU,CAACV,WAAW,CAACG,KAAK,CAACM,WAAW,CAAC,CAAC,CACnE,CAAC;MACD,MAAME,UAAU,GAAGN,eAAe,CAACO,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;MAE/C,MAAMC,MAAM,GAAGF,UAAU,CAACG,GAAG,CAAEP,GAAG,IAAKA,GAAG,CAACQ,KAAK,CAAC;MACjD,MAAMC,OAAO,GAAG,MAAMC,oBAAoB,CAACJ,MAAM,CAAC;MAClDZ,aAAa,CAACE,KAAK,GAAGe,QAAQ,IAAI,EAAE;MACpCnB,IAAI,CAAC,eAAe,EAAEE,aAAa,CAACE,KAAK,CAAC;IAC5C,CAAC,CAAC,OAAOgB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;MAC9BlB,aAAa,CAACE,KAAK,GAAG,EAAE;MACxBJ,IAAI,CAAC,eAAe,EAAE,EAAE,CAAC;IAC3B;EACF,CAAC;EAED,MAAMsB,YAAY,GAAIC,MAAM,IAAK;IAC/BtB,WAAW,CAACG,KAAK,GAAGmB,MAAM,CAACC,OAAO;IAClCxB,IAAI,CAAC,cAAc,EAAEuB,MAAM,CAAC;IAC5BrB,aAAa,CAACE,KAAK,GAAG,EAAE;EAC1B,CAAC;EAED,OAAO;IACLH,WAAW;IACXC,aAAa;IACbC,YAAY;IACZmB;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}