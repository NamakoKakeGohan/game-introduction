{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"diagnosis-page\"\n};\nimport { ref, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport QuestionCard from \"../components/QuestionCard.vue\";\nimport PlojectTestStart from \"../components/PlojectTestStart.vue\";\nimport questionData from \"../data/questionData.js\";\n\n// スコア状態\n\nexport default {\n  __name: 'TestView',\n  setup(__props) {\n    const scores = ref({\n      アクション: 0,\n      カードゲーム: 0,\n      格闘: 0,\n      RPG: 0,\n      シューテーング: 0,\n      アドベンチャー: 0,\n      レース: 0,\n      シュミレーション: 0\n    });\n    const currentIndex = ref(0); // 現在の質問\n    const showModal = ref(true); // モーダルの表示状態\n    const router = useRouter();\n\n    // 現在の質問\n    const currentQuestion = computed(() => questionData[currentIndex.value]);\n\n    // モーダルのスタートボタンが押されたとき\n    const startTest = () => {\n      showModal.value = false; // モーダルを非表示にする\n    };\n\n    // イベントハンドリングされたジャンルをスコアに加算し、次の質問へ進む\n    function handleSelect(selectedGenres) {\n      selectedGenres.forEach(genre => {\n        if (scores.value[genre] !== undefined) {\n          // ジャンルが存在するか確認\n          scores.value[genre]++;\n        }\n      });\n      if (currentIndex.value < questionData.length - 1) {\n        currentIndex.value++;\n      } else {\n        // 最後の質問の場合、結果ページに遷移\n        const topGenre = Object.entries(scores.value).sort((a, b) => b[1] - a[1])[0][0];\n        router.push({\n          name: \"TestResult\",\n          query: {\n            genre: topGenre\n          }\n        });\n      }\n    }\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(PlojectTestStart, {\n        isVisible: showModal.value,\n        onStart: startTest\n      }, null, 8, [\"isVisible\"]), !showModal.value && currentQuestion.value ? (_openBlock(), _createBlock(QuestionCard, {\n        key: 0,\n        question: currentQuestion.value,\n        questionNumber: currentIndex.value + 1,\n        onSelect: handleSelect\n      }, null, 8, [\"question\", \"questionNumber\"])) : _createCommentVNode(\"\", true)]);\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useRouter","QuestionCard","PlojectTestStart","questionData","scores","アクション","カードゲーム","格闘","RPG","シューテーング","アドベンチャー","レース","シュミレーション","currentIndex","showModal","router","currentQuestion","value","startTest","handleSelect","selectedGenres","forEach","genre","undefined","length","topGenre","Object","entries","sort","a","b","push","name","query"],"sources":["/Users/namako-mac/mysite/game-introduction/src/views/TestView.vue"],"sourcesContent":["<template>\n  <div class=\"diagnosis-page\">\n    <!-- モーダル -->\n    <PlojectTestStart :isVisible=\"showModal\" @start=\"startTest\"/>\n\n    <!-- 質問カード -->\n    <QuestionCard\n      v-if=\"!showModal && currentQuestion\"\n      :question=\"currentQuestion\"\n      :questionNumber=\"currentIndex + 1\"\n      @select=\"handleSelect\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport { useRouter }     from \"vue-router\";\nimport QuestionCard      from \"../components/QuestionCard.vue\";\nimport PlojectTestStart  from \"../components/PlojectTestStart.vue\";\nimport questionData      from \"../data/questionData.js\";\n\n// スコア状態\nconst scores = ref({\n  アクション: 0,\n  カードゲーム: 0,\n  格闘: 0,\n  RPG: 0,\n  シューテーング: 0,\n  アドベンチャー: 0,\n  レース: 0,\n  シュミレーション: 0,\n});\n\nconst currentIndex = ref(0); // 現在の質問\nconst showModal    = ref(true); // モーダルの表示状態\nconst router       = useRouter();\n\n// 現在の質問\nconst currentQuestion = computed(() => questionData[currentIndex.value]);\n\n// モーダルのスタートボタンが押されたとき\nconst startTest = () => {\n  showModal.value = false; // モーダルを非表示にする\n};\n\n// イベントハンドリングされたジャンルをスコアに加算し、次の質問へ進む\nfunction handleSelect(selectedGenres) {\n  selectedGenres.forEach((genre) => {\n    if (scores.value[genre] !== undefined) { // ジャンルが存在するか確認\n      scores.value[genre]++;\n    }\n  });\n\n  if (currentIndex.value < questionData.length - 1) {\n    currentIndex.value++;\n  } else {\n    // 最後の質問の場合、結果ページに遷移\n    const topGenre = Object.entries(scores.value).sort((a, b) => b[1] - a[1])[0][0];\n    router.push({ name: \"TestResult\", query: { genre: topGenre } });\n  }\n}\n</script>\n"],"mappings":";;;;;;;AAgBA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SAASC,SAAS,QAAY,YAAY;AAC1C,OAAOC,YAAY,MAAW,gCAAgC;AAC9D,OAAOC,gBAAgB,MAAO,oCAAoC;AAClE,OAAOC,YAAY,MAAW,yBAAyB;;AAEvD;;;;;IACA,MAAMC,MAAM,GAAGN,GAAG,CAAC;MACjBO,KAAK,EAAE,CAAC;MACRC,MAAM,EAAE,CAAC;MACTC,EAAE,EAAE,CAAC;MACLC,GAAG,EAAE,CAAC;MACNC,OAAO,EAAE,CAAC;MACVC,OAAO,EAAE,CAAC;MACVC,GAAG,EAAE,CAAC;MACNC,QAAQ,EAAE;IACZ,CAAC,CAAC;IAEF,MAAMC,YAAY,GAAGf,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7B,MAAMgB,SAAS,GAAMhB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;IAChC,MAAMiB,MAAM,GAASf,SAAS,CAAC,CAAC;;IAEhC;IACA,MAAMgB,eAAe,GAAGjB,QAAQ,CAAC,MAAMI,YAAY,CAACU,YAAY,CAACI,KAAK,CAAC,CAAC;;IAExE;IACA,MAAMC,SAAS,GAAGA,CAAA,KAAM;MACtBJ,SAAS,CAACG,KAAK,GAAG,KAAK,CAAC,CAAC;IAC3B,CAAC;;IAED;IACA,SAASE,YAAYA,CAACC,cAAc,EAAE;MACpCA,cAAc,CAACC,OAAO,CAAEC,KAAK,IAAK;QAChC,IAAIlB,MAAM,CAACa,KAAK,CAACK,KAAK,CAAC,KAAKC,SAAS,EAAE;UAAE;UACvCnB,MAAM,CAACa,KAAK,CAACK,KAAK,CAAC,EAAE;QACvB;MACF,CAAC,CAAC;MAEF,IAAIT,YAAY,CAACI,KAAK,GAAGd,YAAY,CAACqB,MAAM,GAAG,CAAC,EAAE;QAChDX,YAAY,CAACI,KAAK,EAAE;MACtB,CAAC,MAAM;QACL;QACA,MAAMQ,QAAQ,GAAGC,MAAM,CAACC,OAAO,CAACvB,MAAM,CAACa,KAAK,CAAC,CAACW,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/Ed,MAAM,CAACgB,IAAI,CAAC;UAAEC,IAAI,EAAE,YAAY;UAAEC,KAAK,EAAE;YAAEX,KAAK,EAAEG;UAAS;QAAE,CAAC,CAAC;MACjE;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}