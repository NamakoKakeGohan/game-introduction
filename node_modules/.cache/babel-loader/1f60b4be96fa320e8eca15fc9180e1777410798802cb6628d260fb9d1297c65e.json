{"ast":null,"code":"import { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"diagnosis-page\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.currentQuestion ? (_openBlock(), _createBlock($setup[\"QuestionCard\"], {\n    key: 0,\n    question: $setup.currentQuestion,\n    questionNumber: $setup.currentIndex + 1,\n    onSelect: $setup.handleSelect\n  }, null, 8 /* PROPS */, [\"question\", \"questionNumber\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$setup","currentQuestion","_createBlock","key","question","questionNumber","currentIndex","onSelect","handleSelect","_createCommentVNode"],"sources":["/Users/namako-mac/mysite/game-introduction/src/views/TestView.vue"],"sourcesContent":["<template>\n  <div class=\"diagnosis-page\">\n    <QuestionCard\n      v-if=\"currentQuestion\"\n      :question=\"currentQuestion\"\n      :questionNumber=\"currentIndex + 1\"\n      @select=\"handleSelect\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport { useRouter }     from \"vue-router\";\nimport QuestionCard      from \"../components/QuestionCard.vue\";\nimport questionData      from \"../data/questionData.js\";\n\n// スコア状態\nconst scores = ref({\n  アクション: 0,\n  カードゲーム: 0,\n  格闘: 0,\n  RPG: 0,\n  シューテーング: 0,\n  アドベンチャー: 0,\n  レース: 0,\n  シュミレーション: 0,\n});\n\nconst currentIndex = ref(0); // 現在の質問\nconst router = useRouter();\n\n// 現在の質問\nconst currentQuestion = computed(() => questionData[currentIndex.value]);\n\n// イベントハンドリングされたジャンルをスコアに加算し、次の質問へ進む\nfunction handleSelect(selectedGenres) {\n  selectedGenres.forEach((genre) => {\n    if (scores.value[genre] !== undefined) { // ジャンルが存在するか確認\n      scores.value[genre]++;\n    }\n  });\n\n  if (currentIndex.value < questionData.length - 1) {\n    currentIndex.value++;\n  } else {\n    // 最後の質問の場合、結果ページに遷移\n    const topGenre = Object.entries(scores.value).sort((a, b) => b[1] - a[1] )[0][0];\n    router.push({ name: \"TestResult\", query: { genre: topGenre } });\n  }\n}\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgB;;uBAA3BC,mBAAA,CAOM,OAPNC,UAOM,GALIC,MAAA,CAAAC,eAAe,I,cADvBC,YAAA,CAKEF,MAAA;IAPNG,GAAA;IAIOC,QAAQ,EAAEJ,MAAA,CAAAC,eAAe;IACzBI,cAAc,EAAEL,MAAA,CAAAM,YAAY;IAC5BC,QAAM,EAAEP,MAAA,CAAAQ;6DANfC,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}